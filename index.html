<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞—Ä—Ç–∞ –±–∞—Ä–∞</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Inter',sans-serif;
    background: radial-gradient(circle at top, #181818 0%, #080808 70%);
    color:#fff;
}

.topBar{
    display:flex;
    justify-content:center;
    margin-top:18px;
}

.homeBtn{
    background:rgba(255,255,255,0.06);
    border:1px solid rgba(255,255,255,0.15);
    color:#fff;
    padding:10px 18px;
    border-radius:14px;
    font-size:14px;
    backdrop-filter:blur(6px);
    cursor:pointer;
}

.container{
    max-width:720px;
    margin:auto;
    padding:18px;
}

.filters{
    display:flex;
    gap:10px;
    margin-bottom:16px;
}

select,input{
    background:#141414;
    border:1px solid rgba(255,255,255,0.1);
    color:#fff;
    padding:12px;
    border-radius:14px;
    width:100%;
}

select option{
    background:#141414;
    color:#fff;
}

.randomBtn{
    width:100%;
    margin-bottom:18px;
    padding:14px;
    border-radius:16px;
    border:none;
    font-size:15px;
    font-weight:600;
    background:#7CFC00;
    color:#000;
    cursor:pointer;
}

.card{
    background:rgba(255,255,255,0.04);
    border-radius:18px;
    padding:20px;
    margin-bottom:14px;
    border:1px solid rgba(255,255,255,0.08);
}

.photo{
    width:100%;
    border-radius:14px;
    margin-bottom:12px;
}

.card.flash{
    animation:breath 1.6s ease-in-out 2;
}

@keyframes breath{
    0%{ box-shadow:0 0 0 rgba(124,252,0,0); }
    50%{ box-shadow:0 0 30px rgba(124,252,0,0.9); }
    100%{ box-shadow:0 0 0 rgba(124,252,0,0); }
}

.name{
    font-size:23px;
    font-weight:600;
}

.price{
    margin-top:6px;
    font-size:18px;
    color:#7CFC00;
}

.stars{
    margin-top:10px;
    font-size:13px;
    color:#aaa;
}

.comp{
    margin-top:14px;
    font-size:14px;
    color:#ddd;
    line-height:1.5;
}
</style>
</head>

<body>

<div class="topBar">
<button class="homeBtn" onclick="render()">üç∏ –ö–∞—Ä—Ç–∞ –±–∞—Ä–∞</button>
</div>

<div class="container">

<div class="filters">
<select id="strength">
<option value="">–ö—Ä–µ–ø–æ—Å—Ç—å: –≤—Å–µ</option>
<option value="noalc">‚òÜ –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ</option>
<option value="–ª–µ–≥">‚òÖ –ª—ë–≥–∫–∏–µ</option>
<option value="—Å—Ä–µ–¥">‚òÖ‚òÖ —Å—Ä–µ–¥–Ω–∏–µ</option>
<option value="–∫—Ä–µ–ø">‚òÖ‚òÖ‚òÖ –∫—Ä–µ–ø–∫–∏–µ</option>
</select>

<input id="search" placeholder="–°–æ–¥–µ—Ä–∂–∏—Ç‚Ä¶ (–≤–æ–¥–∫–∞, –∞–ø–µ–ª—å—Å–∏–Ω)">
</div>

<button class="randomBtn" onclick="randomDrink()">ü•É –ß—Ç–æ –≤—ã–ø–∏—Ç—å?</button>

<div id="menu"></div>

</div>

<script>

const SHEET_ID="1CceZ3cIic_k9Z9GnXg_wOzoUGdYonzVkfypmSzf_ln8";
const url="https://opensheet.elk.sh/"+SHEET_ID+"/MENU";

let cocktails=[];

fetch(url)
.then(r=>r.json())
.then(data=>{
    cocktails=data;
    render();
});

function buildCard(row, stars, flash=false){
    return `
    <div class="card ${flash ? "flash":""}">
    ${row.–§–æ—Ç–æ ? `<img src="${row.–§–æ—Ç–æ}" class="photo">` : ""}
    <div class="name">${row.–ö–æ–∫—Ç–µ–π–ª—å}</div>
    <div class="price">${row.–¶–µ–Ω–∞}</div>
    <div class="stars">–ö—Ä–µ–ø–æ—Å—Ç—å ‚Äî ${stars}</div>
    <div class="comp">${row.–°–æ—Å—Ç–∞–≤}</div>
    </div>`;
}

function render(){

    const strength=document.getElementById("strength").value;
    const search=document.getElementById("search").value.toLowerCase();
    const menu=document.getElementById("menu");

    menu.innerHTML="";

    cocktails.forEach(row=>{

        if(!row.–ö–æ–∫—Ç–µ–π–ª—å) return;

        let s=(row.–ö—Ä–µ–ø–æ—Å—Ç—å||"").toLowerCase().replace("—ë","–µ");

        if(strength==="noalc" && s) return;
        if(strength && strength!=="noalc" && !s.includes(strength)) return;
        if(search && !row.–°–æ—Å—Ç–∞–≤.toLowerCase().includes(search)) return;

        let stars="‚òÜ";
        if(s.includes("–ª–µ–≥")) stars="‚òÖ";
        if(s.includes("—Å—Ä–µ–¥")) stars="‚òÖ‚òÖ";
        if(s.includes("–∫—Ä–µ–ø")) stars="‚òÖ‚òÖ‚òÖ";

        menu.innerHTML+=buildCard(row,stars);
    });
}

function randomDrink(){

    if(cocktails.length===0) return;

    const strength=document.getElementById("strength").value;
    const search=document.getElementById("search").value.toLowerCase();
    const menu=document.getElementById("menu");

    let filtered=cocktails.filter(row=>{

        if(!row.–ö–æ–∫—Ç–µ–π–ª—å) return false;

        let s=(row.–ö—Ä–µ–ø–æ—Å—Ç—å||"").toLowerCase().replace("—ë","–µ");

        if(strength==="noalc" && s) return false;
        if(strength && strength!=="noalc" && !s.includes(strength)) return false;
        if(search && !row.–°–æ—Å—Ç–∞–≤.toLowerCase().includes(search)) return false;

        return true;
    });

    if(filtered.length===0) return;

    let speed=60;
    let slowdown=1.12;
    let time=0;
    let duration=2400;

    function spin(){

        let rand=filtered[Math.floor(Math.random()*filtered.length)];
        let s=(rand.–ö—Ä–µ–ø–æ—Å—Ç—å||"").toLowerCase().replace("—ë","–µ");

        let stars="‚òÜ";
        if(s.includes("–ª–µ–≥")) stars="‚òÖ";
        if(s.includes("—Å—Ä–µ–¥")) stars="‚òÖ‚òÖ";
        if(s.includes("–∫—Ä–µ–ø")) stars="‚òÖ‚òÖ‚òÖ";

        menu.innerHTML=buildCard(rand,stars);

        time+=speed;
        speed*=slowdown;

        if(time<duration){
            setTimeout(spin,speed);
        }else{
            menu.innerHTML=buildCard(rand,stars,true);
        }
    }

    spin();
}

document.getElementById("strength").onchange=render;
document.getElementById("search").oninput=render;

</script>

</body>
</html>
